<% include partials/header %> <!-- Include the header partial for consistent layout -->

<h2>All Bookings</h2> <!-- Heading for the bookings table -->

<!-- Table to display all booking details -->
<table>
  <thead>
    <tr>
      <th>Name</th> <!-- Column for the name of the person who booked -->
      <th>ID</th> <!-- Column for the person's ID -->
      <th>Date/Time</th> <!-- Column for the booking date and time -->
      <th>CardNo</th> <!-- Column for the card number used in booking -->
      <th>Expiry</th> <!-- Column for the card's expiry date -->
      <th>SecurityCode</th> <!-- Column for the card's security code -->
      <th>Created</th> <!-- Column for the booking creation date/time -->
      <th>Actions</th> <!-- Column for action buttons (Modify/Delete) -->
    </tr>
  </thead>

  <tbody>
    <!-- Loop through each booking object and render a row for each entry -->
    <% for(var i = 0; i < booking.length; i++) { %>
      <tr>
        <td><%= booking[i].name %></td> <!-- Display name -->
        <td><%= booking[i].personId %></td> <!-- Display person ID -->
        <td><%= booking[i].dateTime %></td> <!-- Display booking date/time -->
        <td><%= booking[i].cardNumber %></td> <!-- Display card number -->
        <td><%= booking[i].expiry %></td> <!-- Display card expiry date -->
        <td><%= booking[i].securityCode %></td> <!-- Display security code -->
        <td><%= booking[i].createdAt %></td> <!-- Display creation timestamp -->
        
        <td>
          <!-- Modify button: links to the edit page for the specific booking -->
          <a href="/bookings/<%= booking[i]._id %>/edit" class="button modify-button">Modify</a>

          <form action="/bookings/<%= booking[i]._id %>/delete" method="POST" style="display:inline;">
            <button type="submit" class="button delete-button" onclick="return confirm('Are you sure you want to delete this booking?');">
              Delete
            </button>
          </form>          
        </td>
      </tr>
    <% } %>
  </tbody>
</table>

<% include partials/footer %> <!-- Include the footer partial for consistent layout -->
